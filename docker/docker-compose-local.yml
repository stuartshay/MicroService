version: '3.3'

services:

  api-microservice:
    container_name: 'api-microservice'
    hostname: api-microservice
    image: "stuartshay/microservice-api:latest"
    environment:
     - ASPNETCORE_ENVIRONMENT=Docker
     - ASPNETCORE_URLS=http://*:5002;
     - MOUNT_GCS_BUCKET=false
     - GCS_BUCKET_NAME=files-shapes
    ports:
     - "5002:5002"
    cap_add:
      - SYS_ADMIN  # Required for fuse
    devices:
      - "/dev/fuse"  # Required for fuse
    volumes:
      - "/home/vagrant/keys/service-account-key.json:/etc/gcsfuse/key/service-account-key.json
    networks:
      - microservice-network

networks:
  microservice-network:

